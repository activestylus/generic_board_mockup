/********************************************************************
 *	Kalendae, a framework agnostic javascript date picker           *
 *	Copyright(c) 2012 Jarvis Badgley (chipersoft@gmail.com)         *
 *	http://github.com/ChiperSoft/Kalendae                           *
 *	Version 0.2                                                     *
 ********************************************************************/
(function(){var a,b=function(a,b){a instanceof Element||"string"==typeof a||(b=a);var g=this,i=g.classes,j=g.settings=d.merge(g.defaults,{attachTo:a},b||{}),k=g.container=d.make("div",{"class":i.container}),l=g.calendars=[],m=f().day(j.weekStart),n,o=[],p,q,r;p=[];var s;q=0,n=j.months,d.isIE8()&&d.addClassName(k,"ie8");for(q=7;q--;)o.push(m.format("ddd").substr(0,j.columnHeaderLength)),m.add("days",1);e(g);if("object"==typeof j.subscribe)for(q in j.subscribe)j.subscribe.hasOwnProperty(q)&&g.subscribe(q,j.subscribe[q]);g._sel=[],j.selected&&g.setSelected(j.selected,!1),n=j.viewStartDate?f(j.viewStartDate,j.format):0<g._sel.length?f(g._sel[0]):f(),g.viewStartDate=n.date(1),(n={past:j.months-1,"today-past":j.months-1,any:2<j.months?Math.floor(j.months/2):0,"today-future":0,future:0}[this.settings.direction])&&f().month()==f(g.viewStartDate).month()&&(g.viewStartDate=f(g.viewStartDate).subtract({M:n}).date(1));if("function"==typeof j.blackout)g.blackout=j.blackout;else if(j.blackout){var t=c(j.blackout,j.parseSplitDelimiter);g.blackout=function(a){a=f(a).yearDay();if(1>a||!g._sel||1>g._sel.length)return!1;for(var b=t.length;b--;)if(t[b].yearDay()===a)return!0;return!1}}else g.blackout=function(){return!1};g.direction=g.directions[j.direction]?g.directions[j.direction]:g.directions.any;for(n=Math.max(j.months,1);n--;){p=d.make("div",{"class":i.calendar},k),p.setAttribute("data-cal-index",n),1<j.months&&(n==Math.max(j.months-1,1)?d.addClassName(p,i.monthFirst):0===n?d.addClassName(p,i.monthLast):d.addClassName(p,i.monthMiddle)),q=d.make("div",{"class":i.title},p),d.make("a",{"class":i.previousYear},q),d.make("a",{"class":i.previousMonth},q),d.make("a",{"class":i.nextYear},q),d.make("a",{"class":i.nextMonth},q),m=d.make("span",{"class":i.caption},q),r=d.make("div",{"class":i.header},p),q=0;do s=d.make("span",{},r),s.innerHTML=o[q];while(7>++q);r=d.make("div",{"class":i.days},p),q=0;for(p=[];42>q++;)p.push(d.make("span",{},r));l.push({caption:m,days:p}),n&&d.make("div",{"class":i.monthSeparator},k)}g.draw(),d.addEvent(k,"mousedown",function(a,b){var c;if(d.hasClassName(b,i.nextMonth))!g.disableNext&&!1!==g.publish("view-changed",g,["next-month"])&&(g.viewStartDate.add("months",1),g.draw());else if(d.hasClassName(b,i.previousMonth))!g.disablePreviousMonth&&!1!==g.publish("view-changed",g,["previous-month"])&&(g.viewStartDate.subtract("months",1),g.draw());else if(d.hasClassName(b,i.nextYear))!g.disableNext&&!1!==g.publish("view-changed",g,["next-year"])&&(g.viewStartDate.add("years",1),g.draw());else if(d.hasClassName(b,i.previousYear))!g.disablePreviousMonth&&!1!==g.publish("view-changed",g,["previous-year"])&&(g.viewStartDate.subtract("years",1),g.draw());else if(d.hasClassName(b.parentNode,i.days)&&d.hasClassName(b,i.dayActive)&&(c=b.getAttribute("data-date")))if(c=f(c,j.dayAttributeFormat).hours(12),!1!==g.publish("date-clicked",g,[c]))switch(j.mode){case"multiple":g.addSelected(c)||g.removeSelected(c);break;case"range":g.addSelected(c);break;default:g.addSelected(c)}return!1}),(j.attachTo=d.$(j.attachTo))&&j.attachTo.appendChild(k)};b.prototype={defaults:{attachTo:null,months:1,weekStart:0,direction:"any",directionScrolling:!0,viewStartDate:null,blackout:null,selected:null,mode:"single",format:null,subscribe:null,columnHeaderLength:2,titleFormat:"MMMM, YYYY",dayNumberFormat:"D",dayAttributeFormat:"YYYY-MM-DD",parseSplitDelimiter:/,\s*|\s+-\s+/,rangeDelimiter:" - ",multipleDelimiter:", ",dateClassMap:{}},classes:{container:"kalendae",calendar:"k-calendar",monthFirst:"k-first-month",monthMiddle:"k-middle-month",monthLast:"k-last-month",title:"k-title",previousMonth:"k-btn-previous-month",nextMonth:"k-btn-next-month",previousYear:"k-btn-previous-year",nextYear:"k-btn-next-year",caption:"k-caption",header:"k-header",days:"k-days",dayOutOfMonth:"k-out-of-month",dayActive:"k-active",daySelected:"k-selected",dayInRange:"k-range",dayToday:"k-today",monthSeparator:"k-separator",disablePreviousMonth:"k-disable-previous-month-btn",disableNextMonth:"k-disable-next-month-btn",disablePreviousYear:"k-disable-previous-year-btn",disableNextYear:"k-disable-next-year-btn"},disablePreviousMonth:!1,disableNextMonth:!1,disablePreviousYear:!1,disableNextYear:!1,directions:{past:function(b){return f(b).yearDay()>=a.yearDay()},"today-past":function(b){return f(b).yearDay()>a.yearDay()},any:function(){return!1},"today-future":function(b){return f(b).yearDay()<a.yearDay()},future:function(b){return f(b).yearDay()<=a.yearDay()}},getSelectedAsDates:function(){for(var a=[],b=0,c=this._sel.length;b<c;b++)a.push(this._sel[b].toDate());return a},getSelectedAsText:function(a){for(var b=[],c=0,d=this._sel.length;c<d;c++)b.push(this._sel[c].format(a||this.settings.format||"YYYY-MM-DD"));return b},getSelectedRaw:function(){for(var a=[],b=0,c=this._sel.length;b<c;b++)a.push(f(this._sel[b]));return a},getSelected:function(a){a=this.getSelectedAsText(a);switch(this.settings.mode){case"range":return a.splice(2),a.join(this.settings.rangeDelimiter);case"multiple":return a.join(this.settings.multipleDelimiter);default:return a[0]}},isSelected:function(a){a=f(a).yearDay();if(1>a||!this._sel||1>this._sel.length)return!1;switch(this.settings.mode){case"range":var b=this._sel[0]?this._sel[0].yearDay():0,c=this._sel[1]?this._sel[1].yearDay():0;return b===a||c===a?1:!b||!c?0:a>b&&a<c||b<c&&a<b&&a>c?-1:!1;case"multiple":for(b=this._sel.length;b--;)if(this._sel[b].yearDay()===a)return!0;return!1;default:return this._sel[0]&&this._sel[0].yearDay()===a}},setSelected:function(a,b){this._sel=c(a,this.settings.parseSplitDelimiter,this.settings.format),this._sel.sort(function(a,b){return a.yearDay()-b.yearDay()}),!1!==b&&this.draw()},addSelected:function(a,b){a=f(a).hours(12);switch(this.settings.mode){case"multiple":if(this.isSelected(a))return!1;this._sel.push(a);break;case"range":1!==this._sel.length?this._sel=[a]:a.yearDay()>this._sel[0].yearDay()?this._sel[1]=a:this._sel=[a,this._sel[0]];break;default:this._sel=[a]}return this._sel.sort(function(a,b){return a.yearDay()-b.yearDay()}),this.publish("change",this),!1!==b&&this.draw(),!0},removeSelected:function(a,b){for(var a=f(a).yearDay(),c=this._sel.length;c--;)if(this._sel[c].yearDay()===a)return this._sel.splice(c,1),this.publish("change",this),!1!==b&&this.draw(),!0;return!1},draw:function(){var b=f(this.viewStartDate).hours(12),c,e=this.classes,g,i,j,l=0,m,n=0,o,p=this.settings;m=this.calendars.length;do{c=f(b).date(1),c.day(c.day()<this.settings.weekStart?this.settings.weekStart-7:this.settings.weekStart),g=this.calendars[l],g.caption.innerHTML=b.format(this.settings.titleFormat),n=0;do i=g.days[n],j=[],(o=this.isSelected(c))&&j.push({"-1":e.dayInRange,1:e.daySelected,"true":e.daySelected}[o]),c.month()!=b.month()?j.push(e.dayOutOfMonth):(!this.blackout(c)&&!this.direction(c)||0<o)&&j.push(e.dayActive),c.yearDay()===a.yearDay()&&j.push(e.dayToday),o=c.format(this.settings.dayAttributeFormat),p.dateClassMap[o]&&j.push(p.dateClassMap[o]),i.innerHTML=c.format(p.dayNumberFormat),i.className=j.join(" "),i.setAttribute("data-date",o),c.add("days",1);while(42>++n);b.add("months",1)}while(++l<m);if(p.directionScrolling){c=-f().diff(b,"months");if("today-past"===p.direction||"past"===p.direction)0>c?(this.disableNextMonth=!1,d.removeClassName(this.container,e.disableNextMonth)):(this.disableNextMonth=!0,d.addClassName(this.container,e.disableNextMonth));else if("today-future"===p.direction||"future"===p.direction)c>=p.months?(this.disablePreviousMonth=!1,d.removeClassName(this.container,e.disablePreviousMonth)):(this.disablePreviousMonth=!0,d.addClassName(this.container,e.disablePreviousMonth));if("today-past"===p.direction||"past"===p.direction)0>=b.add({y:1}).diff(f(),"months")?(this.disableNextYear=!1,d.removeClassName(this.container,e.disableNextYear)):(this.disableNextYear=!0,d.addClassName(this.container,e.disableNextYear));else if("today-future"===p.direction||"future"===p.direction)0<=b.subtract({y:1}).diff(f(),"months")-(p.months-1)?(this.disablePreviousYear=!1,d.removeClassName(this.container,e.disablePreviousYear)):(this.disablePreviousYear=!0,d.addClassName(this.container,e.disablePreviousYear))}}};var c=function(a,b,c){var e=[];"string"==typeof a?a=a.split(b):d.isArray(a)||(a=[a]),b=a.length,i=0;do a[i]&&e.push(f(a[i],c).hours(12));while(++i<b);return e};window.Kalendae=b;var d=b.util={isIE8:function(){return!(!/msie 8./i.test(navigator.appVersion)||/opera/i.test(navigator.userAgent)||!window.ActiveXObject||!XDomainRequest||window.msPerformance)},$:function(a){return"string"==typeof a?document.getElementById(a):a},$$:function(a){return document.querySelectorAll(a)},make:function(a,b,c){var d,a=document.createElement(a);if(b)for(d in b)b.hasOwnProperty(d)&&a.setAttribute(d,b[d]);return c&&c.appendChild(a),a},isVisible:function(a){return 0<a.offsetWidth||0<a.offsetHeight},getStyle:function(a,b){var c;return a.currentStyle?c=a.currentStyle[b]:window.getComputedStyle&&(c=window.getComputedStyle(a,null)[b]),c},domReady:function(a){/in/.test(document.readyState)?setTimeout(function(){d.domReady(a)},9):a()},addEvent:function(a,b,c){var d=function(b){var b=b||window.event,d=c.apply(a,[b,b.target||b.srcElement]);return!1===d&&(b.preventDefault?b.preventDefault():(b.returnValue=!1,b.cancelBubble=!0)),d};return a.attachEvent?a.attachEvent("on"+b,d):a.addEventListener(b,d,!1),d},removeEvent:function(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)},hasClassName:function(a,b){if(!(a=d.$(a)))return!1;var c=a.className;return 0<c.length&&(c==b||RegExp("(^|\\s)"+b+"(\\s|$)").test(c))},addClassName:function(a,b){(a=d.$(a))&&!d.hasClassName(a,b)&&(a.className+=(a.className?" ":"")+b)},removeClassName:function(a,b){if(a=d.$(a))a.className=d.trimString(a.className.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)")," "))},isFixed:function(a){do if("fixed"===d.getStyle(a,"position"))return!0;while(a=a.offsetParent);return!1},getPosition:function(a,b){var c=a.offsetLeft,d=a.offsetTop,e={};if(!b)for(;a=a.offsetParent;)c+=a.offsetLeft,d+=a.offsetTop;return e[0]=e.left=c,e[1]=e.top=d,e},getHeight:function(a){return a.offsetHeight||a.scrollHeight},getWidth:function(a){return a.offsetWidth||a.scrollWidth},trimString:function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},merge:function(){for(var a=!0===arguments[0],b={},c=a?1:0;c<arguments.length;c++){var d=b,e=arguments[c];if("object"==typeof e){var f=void 0;for(f in e)e.hasOwnProperty(f)&&(a&&"object"==typeof d[f]&&"object"==typeof e[f]?_update(d[f],e[f]):d[f]=e[f])}}return b},isArray:function(a){return!(!a||!a.length||0===a.length||"object"!=typeof a||!a.constructor||a.nodeType||a.item)}};b.util.domReady(function(){for(var a=d.$$(".auto-kal"),c=a.length,e;c--;)e=a[c],"INPUT"===e.tagName?new b.Input(e):new b({attachTo:e})}),b.Input=function(a,c){var e=this.input=d.$(a),f;if(!e||"INPUT"!==e.tagName)throw"First argument for Kalendae.Input must be an <input> element or a valid element id.";var g=this,h=g.classes;opts=g.settings=d.merge(g.defaults,c),opts.attachTo=window.document.body,opts.selected?f=!0:opts.selected=e.value,b.call(g,opts);if(opts.closeButton){var i=d.make("a",{"class":h.closeButton},g.container);d.addEvent(i,"click",function(){e.blur()})}f&&(e.value=g.getSelected()),f=g.container;var j=!1;f.style.display="none",d.addClassName(f,h.positioned),d.addEvent(f,"mousedown",function(){j=!0}),d.addEvent(window.document,"mousedown",function(){j=!1}),d.addEvent(e,"focus",function(){g.setSelected(this.value),g.show()}),d.addEvent(e,"blur",function(){j?(j=!1,e.focus()):g.hide()}),d.addEvent(e,"keyup",function(){g.setSelected(this.value)}),g.subscribe("change",function(){e.value=g.getSelected()})},b.Input.prototype=d.merge(b.prototype,{defaults:d.merge(b.prototype.defaults,{format:"MM/DD/YYYY",side:"bottom",closeButton:!0,offsetLeft:0,offsetTop:0}),classes:d.merge(b.prototype.classes,{positioned:"k-floating",closeButton:"k-btn-close"}),show:function(){var a=this.container,b=a.style,c=this.input,e=d.getPosition(c);b.display="";switch(opts.side){case"left":b.left=e.left-d.getWidth(a)+this.settings.offsetLeft+"px",b.top=e.top+this.settings.offsetTop+"px";break;case"right":b.left=e.left+d.getWidth(c)+"px",b.top=e.top+this.settings.offsetTop+"px";break;case"top":b.left=e.left+this.settings.offsetLeft+"px",b.top=e.top-d.getHeight(a)+this.settings.offsetTop+"px";break;default:b.left=e.left+this.settings.offsetLeft+"px",b.top=e.top+d.getHeight(c)+this.settings.offsetTop+"px"}b.position=d.isFixed(c)?"fixed":"absolute"},hide:function(){this.container.style.display="none"}});var e=function(a){a||(a=this);var b=a.c_||{};a.publish=function(a,c,d){for(var e=(a=b[a])?a.length:0,f;e--;)if(f=a[e].apply(c,d||[]),"boolean"==typeof f)return f},a.subscribe=function(a,c,d){return b[a]||(b[a]=[]),d?b[a].push(c):b[a].unshift(c),[a,c]},a.unsubscribe=function(a){for(var c=b[a[0]],a=a[1],d=c?c.length:0;d--;)c[d]===a&&c.splice(d,1)}},f=b.moment=function(a,b){function c(a,b){this._d=a,this._isUTC=!!b}function d(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function e(b,c,d,e){var f="string"==typeof c,g=f?{}:c;return f&&e&&(g[c]=+e),c=(g.ms||g.milliseconds||0)+1e3*(g.s||g.seconds||0)+6e4*(g.m||g.minutes||0)+36e5*(g.h||g.hours||0),e=(g.d||g.days||0)+7*(g.w||g.weeks||0),g=(g.M||g.months||0)+12*(g.y||g.years||0),c&&b.setTime(+b+c*d),e&&b.setDate(b.getDate()+e*d),g&&(c=b.getDate(),b.setDate(1),b.setMonth(b.getMonth()+g*d),b.setDate(Math.min((new a(b.getFullYear(),b.getMonth()+1,0)).getDate(),c))),b}function f(a){return"[object Array]"===Object.prototype.toString.call(a)}function g(b){return new a(b[0],b[1]||0,b[2]||1,b[3]||0,b[4]||0,b[5]||0,b[6]||0)}function h(b,c){function e(c){var r;switch(c){case"M":return f+1;case"Mo":return f+1+p(f+1);case"MM":return d(f+1,2);case"MMM":return l.monthsShort[f];case"MMMM":return l.months[f];case"D":return g;case"Do":return g+p(g);case"DD":return d(g,2);case"DDD":return c=new a(i,f,g),r=new a(i,0,1),~~((c-r)/864e5+1.5);case"DDDo":return c=e("DDD"),c+p(c);case"DDDD":return d(e("DDD"),3);case"d":return j;case"do":return j+p(j);case"ddd":return l.weekdaysShort[j];case"dddd":return l.weekdays[j];case"w":return c=new a(i,f,g-j+5),r=new a(c.getFullYear(),0,4),~~((c-r)/864e5/7+1.5);case"wo":return c=e("w"),c+p(c);case"ww":return d(e("w"),2);case"YY":return d(i%100,2);case"YYYY":return i;case"a":return 11<k?q.pm:q.am;case"A":return 11<k?q.PM:q.AM;case"H":return k;case"HH":return d(k,2);case"h":return k%12||12;case"hh":return d(k%12||12,2);case"m":return m;case"mm":return d(m,2);case"s":return n;case"ss":return d(n,2);case"zz":case"z":return(b._d.toString().match(u)||[""])[0].replace(t,"");case"Z":return(0>o?"-":"+")+d(~~(Math.abs(o)/60),2)+":"+d(~~(Math.abs(o)%60),2);case"ZZ":return(0>o?"-":"+")+d(~~(10*Math.abs(o)/6),4);case"L":case"LL":case"LLL":case"LLLL":case"LT":return h(b,l.longDateFormat[c]);default:return c.replace(/(^\[)|(\\)|\]$/g,"")}}var f=b.month(),g=b.date(),i=b.year(),j=b.day(),k=b.hours(),m=b.minutes(),n=b.seconds(),o=-b.zone(),p=l.ordinal,q=l.meridiem;return c.replace(s,e)}function i(b,c){var d=[0,0,1,0,0,0,0],e=0,f=0,h=!1,i=b.match(w),j=c.match(v),k=Math.min(i.length,j.length),m,n;for(m=0;m<k;m++){var o=i[m],p=void 0;switch(j[m]){case"M":case"MM":d[1]=~~o-1;break;case"MMM":case"MMMM":for(p=0;12>p;p++)if(l.monthsParse[p].test(o)){d[1]=p;break}break;case"D":case"DD":case"DDD":case"DDDD":d[2]=~~o;break;case"YY":o=~~o,d[0]=o+(70<o?1900:2e3);break;case"YYYY":d[0]=~~Math.abs(o);break;case"a":case"A":n="pm"===o.toLowerCase();break;case"H":case"HH":case"h":case"hh":d[3]=~~o;break;case"m":case"mm":d[4]=~~o;break;case"s":case"ss":d[5]=~~o;break;case"Z":case"ZZ":h=!0,(p=(o||"").match(z))&&p[1]&&(e=~~p[1]),p&&p[2]&&(f=~~p[2]),p&&"+"===p[0]&&(e=-e,f=-f)}}return n&&12>d[3]&&(d[3]+=12),!1===n&&12===d[3]&&(d[3]=0),d[3]+=e,d[4]+=f,h?new a(a.UTC.apply({},d)):g(d)}function j(a,b,c){var d=l.relativeTime[a];return"function"==typeof d?d(b||1,!!c,a):d.replace(/%d/i,b||1)}function k(a,b){l.fn[a]=function(a){var c=this._isUTC?"UTC":"";return"undefined"!=typeof a?(this._d["set"+c+b](a),this):this._d["get"+c+b]()}}var l,m=Math.round,n={},o="undefined"!=typeof module,p="months,monthsShort,monthsParse,weekdays,weekdaysShort,longDateFormat,calendar,relativeTime,ordinal,meridiem".split(","),q,r=/^\/?Date\((\-?\d+)/i,s=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|dddd?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|zz?|ZZ?|LT|LL?L?L?)/g,t=/[^A-Z]/g,u=/\([A-Za-z ]+\)|:[0-9]{2} [A-Z]{3} /g,v=/(\\)?(MM?M?M?|dd?d?d|DD?D?D?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|ZZ?|T)/g,w=/(\\)?([0-9]+|([a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+|([\+\-]\d\d:?\d\d))/gi,x=/\d{4}.\d\d.\d\d(T(\d\d(.\d\d(.\d\d)?)?)?([\+\-]\d\d:?\d\d)?)?/,y=[["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],z=/([\+\-]|\d\d)/gi,A="Month,Date,Hours,Minutes,Seconds,Milliseconds".split(",");l=function(d,e){if(null===d||""===d)return null;var j;if(d&&d._d instanceof a)j=new a(+d._d);else if(e)if(f(e)){var k=d.match(w),l=99,m,n,o;for(m=0;m<e.length;m++){n=i(d,e[m]),o=k;for(var p=h(new c(n),e[m]).match(w),q=Math.min(o.length,p.length),s=Math.abs(o.length-p.length),t=0,u=void 0,u=0;u<q;u++)~~o[u]!==~~p[u]&&t++;o=t+s,o<l&&(l=o,j=n)}}else j=i(d,e);else if(j=r.exec(d),d===b)j=new a;else if(j)j=new a(+j[1]);else if(d instanceof a)j=d;else if(f(d))j=g(d);else if("string"==typeof d)if(j="YYYY-MM-DDT",x.exec(d)){for(k=0;3>k;k++)if(y[k][1].exec(d)){j+=y[k][0];break}j=i(d,j+"Z")}else j=new a(d);else j=new a(d);return new c(j)},l.utc=function(b,d){return f(b)?new c(new a(a.UTC.apply({},b)),!0):d&&b?l(b+" 0",d+" Z").utc():l(b).utc()},l.humanizeDuration=function(a,b,c){var a=+a,d=l.relativeTime;switch(b){case"seconds":a*=1e3;break;case"minutes":a*=6e4;break;case"hours":a*=36e5;break;case"days":a*=864e5;break;case"weeks":a*=6048e5;break;case"months":a*=2592e6;break;case"years":a*=31536e6;break;default:c=!!b}var b=!c,e=m(Math.abs(a)/1e3),f=m(e/60),g=m(f/60),h=m(g/24),i=m(h/365),e=45>e&&["s",e]||1===f&&["m"]||45>f&&["mm",f]||1===g&&["h"]||22>g&&["hh",g]||1===h&&["d"]||25>=h&&["dd",h]||45>=h&&["M"]||345>h&&["MM",m(h/30)]||1===i&&["y"]||["yy",i];return e[2]=b,b=j.apply({},e),c?(0>=a?d.past:d.future).replace(/%s/i,b):b},l.version="1.5.0",l.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",l.lang=function(a,b){var c,d;d=[];if(b){for(c=0;12>c;c++)d[c]=RegExp("^"+b.months[c]+"|^"+b.monthsShort[c].replace(".",""),"i");b.monthsParse=b.monthsParse||d,n[a]=b}if(n[a])for(c=0;c<p.length;c++)d=p[c],l[d]=n[a][d]||l[d];else o&&(c=require("./lang/"+a),l.lang(a,c))},l.lang("en",{months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthsShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),weekdaysShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:{AM:"AM",am:"am",PM:"PM",pm:"pm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"}}),l.isMoment=function(a){return a instanceof c},l.fn=c.prototype={clone:function(){return l(this)},valueOf:function(){return+this._d},"native":function(){return this._d},toString:function(){return this._d.toString()},toDate:function(){return this._d},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(a){return h(this,a?a:l.defaultFormat)},add:function(a,b){return this._d=e(this._d,a,1,b),this},subtract:function(a,b){return this._d=e(this._d,a,-1,b),this},diff:function(a,b,c){var a=l(a),d=6e4*(this.zone()-a.zone()),d=this._d-a._d-d,e=this.year()-a.year(),f=this.month()-a.month(),a=this.date()-a.date(),b="months"===b?12*e+f+a/30:"years"===b?e+f/12:"seconds"===b?d/1e3:"minutes"===b?d/6e4:"hours"===b?d/36e5:"days"===b?d/864e5:"weeks"===b?d/6048e5:d;return c?b:m(b)},from:function(a,b){return l.humanizeDuration(this.diff(a),!b)},fromNow:function(a){return this.from(l(),a)},calendar:function(){var a=this.diff(l().sod(),"days",!0),b=l.calendar,c=b.sameElse,a=-6>a?c:-1>a?b.lastWeek:0>a?b.lastDay:1>a?b.sameDay:2>a?b.nextDay:7>a?b.nextWeek:c;return this.format("function"==typeof a?a.apply(this):a)},isLeapYear:function(){var a=this.year();return 0===a%4&&0!==a%100||0===a%400},isDST:function(){return this.zone()<l([this.year()]).zone()||this.zone()<l([this.year(),5]).zone()},day:function(a){var b=this._d.getDay();return"undefined"==typeof a?b:this.add({d:a-b})},sod:function(){return this.clone().hours(0).minutes(0).seconds(0).milliseconds(0)},eod:function(){return this.sod().add({d:1,ms:-1})},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return this.clone().month(this.month()+1).date(0).date()}};for(q=0;q<A.length;q++)k(A[q].toLowerCase(),A[q]);return k("year","FullYear"),l}(Date);f.fn.stripTime=function(){return this._d=new Date(864e5*Math.floor(this._d.valueOf()/864e5)),this},f.fn.yearDay=function(a){var b=Math.floor(this._d/864e5);return"undefined"==typeof a?b:this.add({d:a-b})},a=f().stripTime(),"undefined"!=typeof jQuery&&(jQuery.fn.kalendae=function(a){return this.each(function(c,d){"INPUT"===d.tagName?$(d).data("kalendae",new b.Input(d,a)):$(d).data("kalendae",new b($.extend({},{attachTo:d},a)))}),this})})()