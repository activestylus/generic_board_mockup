/*!
 * jCarousel v@VERSION - Riding carousels with jQuery
 * http://sorgalla.com/jcarousel/
 *
 * Copyright 2011, Jan Sorgalla
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * or GPL Version 2 (http://www.opensource.org/licenses/gpl-2.0.php) licenses.
 *
 * Date: @DATE
 */
(function(a,b){var c=function(a){return parseFloat(a)||0},d=Array.prototype.slice,e={};e.version="@VERSION",e.error=function(a){throw new Error(a)},e.noop=function(){},e.proxy=function(a,b){var c=d.call(arguments,2);return function(){return a.apply(b,c.concat(d.call(arguments)))}},e.clone=function(b){if(a.isFunction(b.clone))return b.clone(!0);var c=a();return b.each(function(){c=c.add(this.cloneNode(!0))}),c},e.innerWidth=function(a){return c(a.css("width"))+c(a.css("padding-left"))+c(a.css("padding-right"))},e.innerHeight=function(a){return c(a.css("height"))+c(a.css("padding-top"))+c(a.css("padding-bottom"))},e.outerWidth=function(a){return e.innerWidth(a)+c(a.css("margin-left"))+c(a.css("margin-right"))+c(a.css("border-left-width"))+c(a.css("border-right-width"))},e.outerHeight=function(a){return e.innerHeight(a)+c(a.css("margin-top"))+c(a.css("margin-bottom"))+c(a.css("border-top-width"))+c(a.css("border-bottom-width"))};var f=/^(?:body|html)$/i;e.position=function(d){var e=d.get(0).offsetParent||b.document.body;while(e&&!f.test(e.nodeName)&&a(e).css("position")==="static")e=e.offsetParent;e=a(e);var g=d.offset(),h=f.test(e[0].nodeName)?{top:0,left:0}:e.offset();return g.top-=c(d.css("margin-top")),g.left-=c(d.css("margin-left")),h.top+=c(e.css("border-top-width")),h.left+=c(e.css("border-left-width")),{top:g.top-h.top,left:g.left-h.left}};var g=/^([+\-]=)?(.+)$/;e.parseTarget=function(a){var b=!1,c=typeof a!="object"?g.exec(a):null;return c?(a=parseInt(c[2],10)||0,c[1]&&(b=!0,c[1]==="-="&&(a*=-1))):typeof a!="object"&&(a=parseInt(a,10)||0),{target:a,relative:b}},e.detectCarousel=function(b){var c=b.data("jcarousel"),d=function(b){var c;return b.find(".jcarousel").each(function(){c=a(this).data("jcarousel");if(c)return!1}),c};if(!c)while(b.size()>0){c=d(b);if(c)break;b=b.parent()}return c},e.Plugin={version:e.version,options:{},pluginName:null,pluginClass:null,pluginFn:null,_element:null,_carousel:null,_options:e.noop,_init:e.noop,_destroy:e.noop,_create:function(){this.carousel()._bind("destroy."+this.pluginName,e.proxy(this.destroy,this))},destroy:function(){return this._destroy(),this.carousel()._unbind("."+this.pluginName).element().unbind("."+this.pluginName),this.element().unbind("."+this.pluginName).removeData(this.pluginName),this},element:function(){return this._element},option:function(b,c){if(arguments.length===0)return a.extend({},this.options);if(typeof b=="string"){if(typeof c=="undefined")return typeof this.options[b]=="undefined"?null:this.options[b];this.options[b]=c}else a.isFunction(b)&&(b=b.call(this)),this.options=a.extend({},this.options,b);return this},carousel:function(){return this.options.carousel?this.options.carousel.jquery?this.options.carousel.data("jcarousel"):this.options.carousel:(this._carousel||(this._carousel=e.detectCarousel(this.element()),this._carousel||e.error('Could not detect carousel for plugin "'+this.pluginName+'"')),this._carousel)},_bind:function(a,b,c){return(c||this.element()).bind(this.pluginName+a,b),this},_unbind:function(a,b,c){return(c||this.element()).unbind(this.pluginName+a,b),this},_trigger:function(b,c,d){var e=a.Event((this.pluginName+b).toLowerCase());return d=[this].concat(d||[]),(c||this.element()).trigger(e,d),a.isFunction(e.isDefaultPrevented)?!e.isDefaultPrevented():!e.defaultPrevented}};var h={};e.plugin=function(b,c){if(typeof c=="undefined")return typeof h[b]=="undefined"?e.error('No such plugin "'+b+'" registered'):h[b].call(e,a);h[b]=c;var f,g,i;b!=="jcarousel"?(f="jcarousel"+b.toLowerCase(),g="jcarousel-"+b.toLowerCase(),i="jcarousel"+b.charAt(0).toUpperCase()+b.slice(1)):f=g=i=b;var j=function(b,c){if(!this._init)return new j(b,c);this._element=a(b).data(f,this).addClass(g),this.options=a.extend({},this.options,this._options(),c),this._create(),this._init()};return j.prototype=a.extend({},e.Plugin,{pluginName:f,pluginClass:g,pluginFn:i},c.call(e,a)),a.fn[i]=function(b){var c=d.call(arguments,1),g=this;return typeof b=="string"?this.each(function(){var d=a(this).data(f);if(!d)return e.error("Cannot call methods on "+i+' prior to initialization; attempted to call method "'+b+'"');if(!a.isFunction(d[b])||b.charAt(0)==="_")return e.error('No such method "'+b+'" for '+i+" instance");var h=d[b].apply(d,c);if(h!==d&&typeof h!="undefined")return g=h,!1}):this.each(function(){var c=a(this).data(f);c?b&&c.option(b):j(this,b)}),g},j};var i=b.jCarousel;e.noConflict=function(){return b.jCarousel=i,e},b.jCarousel=e,e.plugin("jcarousel",function(a){var d=this;return{options:{list:"ul",items:"li",animation:400,wrap:null,vertical:null,rtl:null,center:!1},animating:!1,tail:0,inTail:!1,resizeTimer:null,lt:null,vertical:!1,rtl:!1,circular:!1,_list:null,_items:null,_target:null,_first:null,_last:null,_visible:null,_fullyvisible:null,_create:function(){},_init:function(){if(!1===this._trigger("init"))return this;this._reload();var c=this;return this.onWindowResize=function(){c.resizeTimer&&clearTimeout(c.resizeTimer),c.resizeTimer=setTimeout(function(){c.reload()},100)},a(b).bind("resize.jcarousel",this.onWindowResize),this.onAnimationComplete=function(b){c.animating=!1;var d=c.list().find(".jcarousel-clone");d.size()>0&&(d.remove(),c._reload()),c._trigger("animateEnd"),a.isFunction(b)&&b.call(c,!0)},this._trigger("initEnd"),this},destroy:function(){return!1===this._trigger("destroy")?this:(this.element().unbind("."+this.pluginName).removeData(this.pluginName),this.items().unbind(".jcarousel"),a(b).unbind("resize.jcarousel",this.onWindowResize),this._trigger("destroyend"),this)},reload:function(){return!1===this._trigger("reload")?this:(this._reload(),this._trigger("reloadEnd"),this)},list:function(){if(this._list===null){var b=this.option("list");this._list=a.isFunction(b)?b.call(this):this.element().find(b)}return this._list},items:function(){if(this._items===null){var b=this.option("items");this._items=(a.isFunction(b)?b.call(this):this.list().find(b)).not(".jcarousel-clone")}return this._items},target:function(){return this._target},first:function(){return this._first},last:function(){return this._last},visible:function(){return this._visible},fullyvisible:function(){return this._fullyvisible},hasNext:function(){var a=this.option("wrap"),b=this.items().size()-1;return b>=0&&(a&&a!=="first"||this._last.index()<b||this.tail&&!this.inTail)?!0:!1},hasPrev:function(){var a=this.option("wrap");return this.items().size()>0&&(a&&a!=="last"||this._first.index()>0||this.tail&&this.inTail)?!0:!1},scroll:function(b,e,f){if(this.animating)return this;if(!1===this._trigger("scroll",null,[b,e]))return this;a.isFunction(e)&&(f=e,e=!0);var g=d.parseTarget(b);if(g.relative){var h=this.items().size()-1,i=Math.abs(g.target),l,m,n,o;if(g.target>0){var p=this._last.index();if(p>=h&&this.tail)this.inTail?this.options.wrap=="both"||this.options.wrap=="last"?this._scroll(0,e,f):this._scroll(Math.min(this._target.index()+i,h),e,f):this._scrollTail(e,f);else if(p!==h||this.options.wrap!="both"&&this.options.wrap!="last"){l=this._target.index(),m=l+i;if(this.circular&&m>h){o=h,n=this.items().get(-1);while(o++<m)n=this.items().eq(0),n.after(d.clone(n).addClass("jcarousel-clone")),this.list().append(n),this._items=null;this._scroll(n,e,f)}else this._scroll(Math.min(m,h),e,f)}else this._scroll(0,e,f)}else if(this.inTail)this._scroll(Math.max(this._first.index()-i+1,0),e,f);else{l=this._first.index(),m=l-i;if(l!==0||this.options.wrap!="both"&&this.options.wrap!="first")if(this.circular&&m<0){o=m,n=this.items().get(0);while(o++<0){n=this.items().eq(-1),n.after(d.clone(n).addClass("jcarousel-clone")),this.list().prepend(n),this._items=null;var q=c(this.list().css(this.lt)),r=this._dimension(n);this.rtl?q+=r:q-=r,this.list().css(this.lt,q+"px")}this._scroll(n,e,f)}else this._scroll(Math.max(l-i,0),e,f);else this._scroll(h,e,f)}}else this._scroll(g.target,e,f);return this._trigger("scrollend"),this},_reload:function(){var b=this.element(),c=function(){if((""+b.attr("dir")).toLowerCase()==="rtl")return!0;var c=!1;return b.parents("[dir]").each(function(){if(/rtl/i.test(a(this).attr("dir")))return c=!0,!1}),c};this.vertical=this.options.vertical==null?(""+b.attr("class")).toLowerCase().indexOf("jcarousel-vertical")>-1:this.options.vertical,this.rtl=this.options.rtl==null?c():this.options.rtl,this.lt=this.vertical?"top":"left",this._items=null;var d=this._target||this.items().eq(0);return this.circular=this.options.wrap=="circular",this.list().css({left:0,top:0}),d.size()>0&&(this._prepare(d),this.list().find(".jcarousel-clone").remove(),this._items=null,this.circular=this.options.wrap=="circular"&&this._fullyvisible.size()<this.items().size(),this.list().css(this.lt,this._position(d)+"px")),this},_scroll:function(b,d,e){if(this.animating)return this;typeof b!="object"?b=this.items().eq(b):typeof b.jquery=="undefined"&&(b=a(b));if(b.size()===0)return a.isFunction(e)&&e.call(this,!1),this;this.inTail=!1,this._prepare(b);var f=this._position(b),g=c(this.list().css(this.lt));if(f===g)return a.isFunction(e)&&e.call(this,!1),this;var h={};return h[this.lt]=f+"px",this._animate(h,d,e),this},_scrollTail:function(a,b){if(this.animating||!this.tail)return this;var c=d.position(this.list())[this.lt];this.rtl?c+=this.tail:c-=this.tail,this.inTail=!0;var e={};return e[this.lt]=c+"px",this._update({target:this._target.next(),fullyvisible:this._fullyvisible.slice(1).add(this._visible.last())}),this._animate(e,a,b),this},_animate:function(b,c,d){if(this.animating)return this;if(!1===this._trigger("animate"))return this;this.animating=!0;if(!this.options.animation||c===!1)this.list().css(b),this.onAnimationComplete(d);else{var e=this;if(a.isFunction(this.options.animation))this.options.animation.call(this,b,function(){e.onAnimationComplete(d)});else{var f=typeof this.options.animation=="object"?this.options.animation:{duration:this.options.animation},g=f.complete;f.complete=function(){e.onAnimationComplete(d),a.isFunction(g)&&g.call(this)},this.list().animate(b,f)}}return this},_prepare:function(b){var e=b.index(),f=e,g=this._dimension(b),h=this._clipping(),i={target:b,first:b,last:b,visible:b,fullyvisible:g<=h?b:a()},l=this.vertical?"bottom":this.rtl?"left":"right",m,n;this.options.center&&(g/=2,h/=2);if(g<h)for(;;){m=this.items().eq(++f);if(m.size()===0){if(!this.circular)break;m=this.items().eq(0);if(b.get(0)===m.get(0))break;m.after(d.clone(m).addClass("jcarousel-clone")),this.list().append(m),this._items=null}g+=this._dimension(m),i.last=m,i.visible=i.visible.add(m),n=c(m.css("margin-"+l)),g-n<=h&&(i.fullyvisible=i.fullyvisible.add(m));if(g>=h)break}if(!this.circular&&g<h){f=e;for(;;){if(--f<0)break;m=this.items().eq(f);if(m.size()===0)break;g+=this._dimension(m),i.first=m,i.visible=i.visible.add(m),n=c(m.css("margin-"+l)),g-n<=h&&(i.fullyvisible=i.fullyvisible.add(m));if(g>=h)break}}return this._update(i),this.tail=0,this.options.wrap!=="circular"&&this.options.wrap!=="custom"&&i.last.index()===this.items().size()-1&&(g-=c(i.last.css("margin-"+l)),g>h&&(this.tail=g-h)),this},_position:function(a){var b=this._first,c=d.position(b)[this.lt];return this.rtl&&!this.vertical&&(c-=this._clipping()-this._dimension(b)),this.options.center&&(c-=this._clipping()/2-this._dimension(b)/2),(a.index()>b.index()||this.inTail)&&this.tail?(c=this.rtl?c-this.tail:c+this.tail,this.inTail=!0):this.inTail=!1,-c},_update:function(b){var c=this,d={target:this._target||a(),first:this._first||a(),last:this._last||a(),visible:this._visible||a(),fullyvisible:this._fullyvisible||a()},e=(b.first||d.first).index()<d.first.index(),f,g=function(f){var g=[],h=[];b[f].each(function(){d[f].index(this)<0&&g.push(this)}),d[f].each(function(){b[f].index(this)<0&&h.push(this)}),e?g=g.reverse():h=h.reverse(),c._trigger("item"+f+"in",a(g)),c._trigger("item"+f+"out",a(h)),d[f].removeClass("jcarousel-item-"+f),b[f].addClass("jcarousel-item-"+f),c["_"+f]=b[f]};for(f in b)g(f);return this},_clipping:function(){return d["inner"+(this.vertical?"Height":"Width")](this.element())},_dimension:function(a){return d["outer"+(this.vertical?"Height":"Width")](a)}}})})(window.jQuery||window.Zepto,window)